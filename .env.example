# =================================================================
# App / API Configuration
# =================================================================
APP_ENV=local                    # Environment: local | prod
APP_NAME=mareon-api
APP_VERSION=0.1.0
PORT=8000
API_V1_PREFIX=/api/v1

# =================================================================
# Logging Configuration
# =================================================================
LOG_LEVEL=INFO                   # Logging level: DEBUG | INFO | WARNING | ERROR
JSON_LOGS=false                  # Use JSON format for logs (recommended for prod)

# =================================================================
# Database Configuration
# =================================================================
# Choose your database connection mode based on your environment
DB_MODE=local_url                # Options: local_url | cloudsql_iam

# -----------------------------------------------------------------
# Mode A: Local Database (db_mode=local_url)
# -----------------------------------------------------------------
# Use this mode for:
# - Local development
# - Direct PostgreSQL connections
# - Standard database URL connections
#
# The driver (asyncpg for async, pg8000 for migrations) is automatically
# selected based on the operation type. You can use any of these formats:
#   postgresql://user:pass@host:port/dbname
#   postgresql+asyncpg://user:pass@host:port/dbname
#   postgresql+pg8000://user:pass@host:port/dbname
#
# Required when DB_MODE=local_url:
DATABASE_URL=postgresql://app_user:password@127.0.0.1:5432/mareon

# -----------------------------------------------------------------
# Mode B: Google Cloud SQL with IAM (db_mode=cloudsql_iam)
# -----------------------------------------------------------------
# Use this mode for:
# - Production deployments on Google Cloud Platform
# - Cloud SQL with IAM authentication
# - Automatic connection management via Cloud SQL Connector
#
# Required when DB_MODE=cloudsql_iam:
CLOUD_SQL_INSTANCE=mareon:europe-west1:mareon-prod-db
DB_NAME=mareon
DB_IAM_USER=mareon-prod-api@mareon.iam.gserviceaccount.com
MIGRATION_IAM_USER=mareon-prod-migrations@mareon.iam.gserviceaccount.com
DB_CONNECTOR_IP_TYPE=PRIVATE     # Connection type: PRIVATE | PUBLIC

# -----------------------------------------------------------------
# Connection Pool Settings (All Modes)
# -----------------------------------------------------------------
# These settings apply to both local_url and cloudsql_iam modes
DB_POOL_SIZE=5                   # Number of connections to maintain in pool
DB_MAX_OVERFLOW=5                # Max connections above pool_size
DB_POOL_TIMEOUT=30               # Seconds to wait for connection from pool
DB_POOL_RECYCLE=1800             # Seconds before recycling connections (30 min)
DB_POOL_PRE_PING=true            # Test connections before using them

# =================================================================
# Authentication & External Services
# =================================================================
AUTH_ENABLED=FALSE               # Enable/disable Clerk authentication
CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...
CLERK_WEBHOOK_SECRET=whsec_...

# =================================================================
# Google Cloud Storage (Documents)
# =================================================================
GCS_BUCKET_NAME=mareon-prod-uploads            # GCS bucket for document storage
GCS_SIGNED_URL_TTL_SECONDS=900                 # Signed URL expiration time in seconds
